{"ast":null,"code":"var _localStorage$getItem;\nimport axios from \"axios\";\nconst baseUrl = \"https://backend-dev-itine.onrender.com/\";\nconst client = axios.create({\n  withCredentials: true,\n  baseURL: `${baseUrl}`,\n  headers: {\n    authorization: (_localStorage$getItem = localStorage.getItem(\"token\")) !== null && _localStorage$getItem !== void 0 ? _localStorage$getItem : \"\",\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\"\n  }\n});\nclient.interceptors.response.use(response => {\n  return response;\n}, async error => {\n  if ([401, 403].includes(error.response.status)) {\n    var _localStorage$getItem2;\n    const {\n      data\n    } = await axios.get(`${baseUrl}auth/refresh`, {\n      withCredentials: true\n    });\n    localStorage.setItem(\"token\", `Bearer ${data.accessToken}`);\n    console.log(error.config);\n    return axios({\n      ...error.config,\n      headers: {\n        authorization: (_localStorage$getItem2 = localStorage.getItem(\"token\")) !== null && _localStorage$getItem2 !== void 0 ? _localStorage$getItem2 : \"\"\n      }\n    });\n  } else {\n    return Promise.reject(error);\n  }\n});\nexport default client;","map":{"version":3,"names":["axios","baseUrl","client","create","withCredentials","baseURL","headers","authorization","_localStorage$getItem","localStorage","getItem","Accept","interceptors","response","use","error","includes","status","_localStorage$getItem2","data","get","setItem","accessToken","console","log","config","Promise","reject"],"sources":["/Users/mac/Work/frontend/React/itine/src/utils/jwtInterceptor.js"],"sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"https://backend-dev-itine.onrender.com/\";\nconst client = axios.create({\n  withCredentials: true,\n  baseURL: `${baseUrl}`,\n  headers: {\n    authorization: localStorage.getItem(\"token\") ?? \"\",\n    \"Content-Type\": \"application/json\",\n    Accept: \"application/json\",\n  },\n});\n\nclient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async (error) => {\n    if ([401, 403].includes(error.response.status)) {\n      const { data } = await axios.get(`${baseUrl}auth/refresh`, {\n        withCredentials: true,\n      });\n      localStorage.setItem(\"token\", `Bearer ${data.accessToken}`);\n      console.log(error.config);\n      return axios({\n        ...error.config,\n        headers: { authorization: localStorage.getItem(\"token\") ?? \"\" },\n      });\n    } else {\n      return Promise.reject(error);\n    }\n  }\n);\n\nexport default client;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,yCAAyC;AACzD,MAAMC,MAAM,GAAGF,KAAK,CAACG,MAAM,CAAC;EAC1BC,eAAe,EAAE,IAAI;EACrBC,OAAO,EAAG,GAAEJ,OAAQ,EAAC;EACrBK,OAAO,EAAE;IACPC,aAAa,GAAAC,qBAAA,GAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,cAAAF,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IAClD,cAAc,EAAE,kBAAkB;IAClCG,MAAM,EAAE;EACV;AACF,CAAC,CAAC;AAEFT,MAAM,CAACU,YAAY,CAACC,QAAQ,CAACC,GAAG,CAC7BD,QAAQ,IAAK;EACZ,OAAOA,QAAQ;AACjB,CAAC,EACD,MAAOE,KAAK,IAAK;EACf,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAACC,QAAQ,CAACD,KAAK,CAACF,QAAQ,CAACI,MAAM,CAAC,EAAE;IAAA,IAAAC,sBAAA;IAC9C,MAAM;MAAEC;IAAK,CAAC,GAAG,MAAMnB,KAAK,CAACoB,GAAG,CAAE,GAAEnB,OAAQ,cAAa,EAAE;MACzDG,eAAe,EAAE;IACnB,CAAC,CAAC;IACFK,YAAY,CAACY,OAAO,CAAC,OAAO,EAAG,UAASF,IAAI,CAACG,WAAY,EAAC,CAAC;IAC3DC,OAAO,CAACC,GAAG,CAACT,KAAK,CAACU,MAAM,CAAC;IACzB,OAAOzB,KAAK,CAAC;MACX,GAAGe,KAAK,CAACU,MAAM;MACfnB,OAAO,EAAE;QAAEC,aAAa,GAAAW,sBAAA,GAAET,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,cAAAQ,sBAAA,cAAAA,sBAAA,GAAI;MAAG;IAChE,CAAC,CAAC;EACJ,CAAC,MAAM;IACL,OAAOQ,OAAO,CAACC,MAAM,CAACZ,KAAK,CAAC;EAC9B;AACF,CACF,CAAC;AAED,eAAeb,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}